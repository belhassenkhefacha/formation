<!doctype html>
<html lang>
	<head>
		<meta charset="UTF-8">
		<title>js</title>
	</head>
	<script type="module">
        let a="salut";
        let b="les gens";
        const isMajeur=undefined;
        const person={
            firstname:"Belhassen",
            lastname:"Khefacha",
            age:21,
            note:[12,15,19],
            job:{
                name:"informaticien",
                hours:20,
            }
    }
        console.log("bonjour"); 
        const age=20;
        if(age!==18)
        {
            console.log("pas 18");
        }
        else
        {
            console.log("18")
        }
        pays="US"
        switch (pays){
            case "FR":
                console.log("france");
                break;
            case "US":
                console.log("etat unis");
                break;
            default:
                console.log("autre");
        }
        const year=2022
        const birthyear=prompt("Quel est votre annee");
        if(year-birthyear<13)
        {
            console.log("non matrix");
        }
        else if (year-birthyear>18)
        {
            console.log("evil dead");
        }
        else
        {
            console.log(" matrix");
        }
        
        const a1=prompt("donner a1");
        const a2=prompt("donner a2");
        const c=a1*a2;
        if(c>0)
        {
            console.log(`${a1}*${a2}=${c} est positif`);
        }
        else 
        {
            console.log(`${a1}*${a2}=${c} est negatif`);
        }
        const greeting="Bonjour";
        console.log("affichage des lettres");
        for (let letter of greeting)
            console.log(letter);
        console.log('---------------------');
        console.log("affichage des indices");
        for (letter in greeting)
            console.log(letter);
        const nombre=prompt("donner nbre");
        function isPremier(nombre)
        {
            let nbdiv=0;
            for (let i=0;i<=nombre;i++)
            {
                if(nombre % i===0)
                {
                    nbdiv++;
                }
            }
            return nbdiv===2;
        }
        console.log(isPremier(nombre));

        const ch=prompt("tapper une chaine");
        function isPalindrome(ch)
        {   const letters=ch.split('');
            letters.reverse();
            const ch1=letters.join('');
            return ch===ch1;
        }
        console.log(isPalindrome(ch));
        const not=[12,15,19];
        const moyenne=(not) =>{
            let sum=0;
            for(let note of not){
                sum+=note
            }
            return sum/not.length;
        }
        class student{
            ecole="Jules Ferry"

            constructor(prenom,nom){
                this.prenom=prenom;
                this.nom=nom;
            }
            set notes(v){
                if(Array.isArray(v))
                {
                    this.not=v;
                }
            }
            get nom (){
                return `${this.prenom} ${this.nom}`;
            }
            canpass(){
                return moyenne(this.not)>=10
            }
        }
        const john=new student('john','doe');
        const jane=new student('jane','xxx');
        john.notes=10;
        jane.notes=[14,14,16];
        console.log(john.canpass(),jane.canpass);
        console.log(john.nom);
        console.log(jane.nom);


        class rectangle{
            constructor(larg,long){
                if(larg<=0 || long<=0)
                    throw new Error('verifier la taille');
                this.larg=larg;
                this.long=long; 
            }
            get perimetre(){
                return 2*this.larg+2*this.long;
            }

            get isvalid(){
                return this.larg>0 && this.long >0;
            }

            isbiggerthan(shape)
            {
                return this.perimetre>shape.perimetre;
            }
        }


        class square extends rectangle{
            constructor(larg){
                super(larg,larg);
            }

        }

        

        class promptError extends Error{

        }


        function promptrectangle(){
            const wid=parseInt(prompt('tapper le largeur'),10);
            const hei=parseInt(prompt('tapper le longueur'),10);
            const r=new rectangle(wid,hei);
            return r;        
    }
        
    try{
        promptrectangle();
        console.log(r.perimetre);
        console.log(r.isvalid);
        const w=parseInt(prompt('tapper le largeur du 2eme rectangle'),10);
        const h=parseInt(prompt('tapper le longueur du 2eme rectangle'),10);
        const r2=new rectangle(w,h);
        console.log(r2.isvalid);
        const width=parseInt(prompt('tapper le largeur du carr√©'),10);
        const c=new square(width);
        console.log(c.perimetre);
        console.log(r.isbiggerthan(c));
    }catch(e){
        if(e instanceof promptError)
        {
            console.log('promptError');
        }
        else
        {
            console.log('erreur classique',e);
        }
        
    }
        class livre{
            #page=1;
            constructor(titre,nbpage){
                this.titre=titre;
                if(nbpage<=0)
                    throw new Error('nombre de page negatif');
                this.nbpage=nbpage;   
            }

            get page(){
                return this.#page;
            }

            nextpage(){
                if(this.#page<this.nbpage)
                {
                    this.#page++;
                }   
            }

            close(){
                this.#page=1;
            }
        }

        class library{
            #books=[];
            addbook(book){
                this.#books.push(book);
            }


            addbooks(books){
                for(let book of books)
                {
                    this.addbook(book);
                }
                
                books.forEach(book=>this.addbook(book));   
            }

            findbooksbyletter(letter){
                return this.#books.filter((book)=> book.titre[0].toLowerCase()===letter.toLowerCase())
            }
            
        }
        const book=new livre('b1',50);
        console.log(book.page);
        book.nextpage();
        console.log(book.page);
        book.close();
        console.log(book.page);
        const lib=new library();
        lib.addbook(book);
        lib.addbooks(
            [new livre('demon slyer',200),
            new livre('boku',300),
            new livre('aot',60)]
        );
        console.log(lib.findbooksbyletter('b'));
        const double= n => n*2;
        console.log(double(4));
        let  aaa=0;
        aaa ||=3
        const bbb= aaa ?? 5;
        console.log(bbb);
        const notes=[12,13,14];
        const premiernotes=notes[0];
        const secondnotes=notes[1];
        //ou bien
        const[premiernotes,secondnotes]=[12,13,14];
        console.log("premier note =",premiernotes);
        console.log("second note =",secondnotes);
        const ag=15;
        const pa="TUN";
        console.log(ag>=18 ? "Majeur" : "Mineur");

        function wait(duration){
            const t=Date.now();
            while(Date.now()-t<duration){

            }
        }

         function decompte(n){ 
            setTimeout(()=>{
				n--;
				console.log(n);
				decompte(n);
			},1000);
        }
		decompte(3)
		decompte(0);
        decompte(3);
        console.log("Bonjour");
        setTimeout(()=>{
            console.log("Au Revoir");
        },1000)
        const p=new Promise((resolve,reject)=>{
			resolve(4);
		})
		function waitsync(duration){
			const t=Date.now()
			while(Date.now -t <duration)
			{
				
			}
		function wait(duration){
			return new Promise((resolve,reject) =>{
				setTimeout(()=>{
					resolve(duration)
				},duration)
			})
		}
		
		function waitandfail(duration){
			return new Promise((resolve,reject) => {
				setTimeout(() => {
					reject(duration)
				},duration)
			})
		}
		
		async function main() {
			const duration=await wait(2000)
			console.log(`duration  ${duration}`);
			return 5
		}
		
		const p=new Promise((r) => {
			console.log('hello')
			r(2)
		})
		p.then(() => {
			console.log('then');
		waitsync(2000)
		console.log('les gens')
		const y=new AbortController();
		Promise.race([
			fetch('https://jsonplaceholder.typicode.com/posts/?_limit=5&delay=2000',{
				signal: y.signal
			}),
			fetch('https://jsonplaceholder.typicode.com/users/?_limit=3',{
				signal: y.signal
			
			})
		]).then(r=>r.json()).then(body => {
				y.abort()
				console.log(body)
		})
		import { sum as somme, hello } from './array.js'
		import bye from './hello.js'
		console.log(bye)
		(async function(){
			const {hello}= await import('./array.js')
			hello()
		})
		/** @type {string[]}  */         //preciser le type de la variable b 
        const b=[]
		
		new Date()
		new Date(10)
		new Date(2022,0,1)          //0:janvier   
		new Date(2022,14,1)          // 1 mars 2023
		new Date(2022,0,32)          // 1 february 2022
		new Date(2022,0,32).getTimezoneOffset()
		const d1=new Date(2023,2,3)
		const day=d1.getDay()                  //mercredi
		const mon=d1.getMonth()                //mars
		const h=d1.getHours()
		const m=d1.getMinutes()
		const sec=d1.getSeconds()
		console.log(`le ${day} ${mon}`)
		
         
    </script>
</head>
<body>
    
</body>
</html>